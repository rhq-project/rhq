<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:onc="http://jboss.org/on/component"
      xmlns:rich="http://richfaces.ajax4jsf.org/rich">

<ui:composition template="/rhq/layout/main.xhtml">
<ui:param name="pageTitle" value="Installed Plugins"/>

<ui:define name="breadcrumbs">
   <h:outputLink value="/Admin.do">
      ${msg["admin.admin.AdministrationTitle"]}
   </h:outputLink>
          &gt;
        <h:outputLink value="plugin-list.xhtml" >
           <h:outputText value="Installed Plugins"/>
        </h:outputLink>
</ui:define>

<ui:define name="body">

<br/>
<h:messages showSummary="true"
            showDetail="true"
            infoClass="InfoBlock"
            warnClass="WarnBlock"
            errorClass="ErrorBlock"
            fatalClass="FatalBlock"
            globalOnly="true"
            layout="table"
            width="100%"/>

<h:form id="pluginsForm">

   <rich:panel>
      <f:facet name="header">
         <h:outputText value="Installed Plugins"/>
      </f:facet>

      <h:panelGrid columns="1" width="100%">

         <rich:dataTable id="pluginsDataTable"
                         value="#{InstalledPluginsUIBean.installedPlugins}"
                         var="plugin"
                         width="100%"
                         columnsWidth="1%, 20%, 45%, 15%, 9%"
                         headerClass="tableRowHeader"
                         footerClass="on-pager-footer">


            <rich:column>
               <f:facet name="header">
                  <onc:allSelect target="selectedPlugin"/>
               </f:facet>

               <onc:select name="selectedPlugin" value="#{plugin.id}"/>
            </rich:column>

            <rich:column rendered="#{param.debug}">
               <f:facet name="header">
                  <h:outputText styleClass="headerText" value="ID"/>
               </f:facet>

               <h:outputText value="#{plugin.id}"/>
            </rich:column>


            <rich:column>
               <f:facet name="header">
                  <h:outputText styleClass="headerText" value="Name"/>
               </f:facet>

               <h:outputLink value="/rhq/admin/plugin/plugin-details.xhtml">
                  <f:param name="plugin" value="#{plugin.name}"/>
                  <h:outputText value="#{plugin.displayName}"/>
               </h:outputLink>

            </rich:column>


            <rich:column>
               <f:facet name="header">
                  <h:outputText styleClass="headerText" value="Description"/>
               </f:facet>

               <h:outputText value="#{plugin.description}"/>
            </rich:column>

            <rich:column>
               <f:facet name="header">
                  <h:outputText styleClass="headerText" value="Date Created"/>
               </f:facet>

               <h:outputText value="#{plugin.ctime}">
                  <f:convertDateTime pattern="M/d/yy, h:mm:ss aa, zzz" timeZone="#{ServerInfoUIBean.timeZone}"/>
               </h:outputText>
            </rich:column>


            <rich:column>
               <f:facet name="header">
                  <h:outputText styleClass="headerText" value="Active"/>
               </f:facet>

               <h:outputText value="#{plugin.enabled}"/>
            </rich:column>


         </rich:dataTable>

      </h:panelGrid>

   </rich:panel>
</h:form>

<rich:panel rendered="false">
    <f:facet name="header">
       <h:outputText value="Upload Plugin"/>
    </f:facet>

    <h:panelGrid columns="1" width="100%">

       <h:form id="uploadForm" enctype="multipart/form-data">


            <table>
               <tr>
                  <td><b>Plugin File:</b></td>
                  <td><onc:upload id="uploadFile"/></td>
               </tr>
            </table>

            <h:commandButton style="margin-top: 10px;" value="UPLOAD"
                             action="#{InstalledPluginsUIBean.uploadPlugin}" styleClass="buttonmed"/>
      </h:form>

    </h:panelGrid>

</rich:panel>

</ui:define>

</ui:composition>

</html>