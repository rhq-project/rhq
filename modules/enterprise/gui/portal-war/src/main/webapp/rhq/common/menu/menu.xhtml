<a4j:region renderRegionOnly="true" selfRendered="true"
            xmlns="http://www.w3.org/1999/xhtml"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:rich="http://richfaces.ajax4jsf.org/rich"
            xmlns:a4j="http://richfaces.org/a4j">

<h:form>

<f:loadBundle basename="ApplicationResources" var="msg"/>

<rich:toolBar styleClass="topMenu">
<rich:toolBarGroup location="left">

    <h:outputLink value="/">
        <h:graphicImage value="/images/logo_icon.png"/>
    </h:outputLink>


    <h:outputLink value="/Dashboard.do">
        <h:outputText value="#{msg['dash.home.PageTitle']}"/>
    </h:outputLink>

    <rich:dropDownMenu>
        <f:facet name="label">
            <h:panelGroup>
                <h:outputLink value="/ResourceHub.do">
                    <h:outputText value="Resources"/>
                </h:outputLink>
            </h:panelGroup>
        </f:facet>

        <rich:menuItem submitMode="none"
                       onclick="window.location = '/ResourceHub.do?resourceCategory=PLATFORM'">
            <h:outputText value="#{msg['resource.hub.filter.platform']}"/>
        </rich:menuItem>

        <rich:menuItem submitMode="none"
                       onclick="window.location = '/ResourceHub.do?resourceCategory=SERVER'">
            <h:outputText value="#{msg['resource.hub.filter.server']}"/>
        </rich:menuItem>

        <rich:menuItem submitMode="none"
                       onclick="window.location = '/ResourceHub.do?resourceCategory=SERVICE'">
            <h:outputText value="#{msg['resource.hub.filter.service']}"/>
        </rich:menuItem>

        <rich:menuSeparator/>


        <rich:menuGroup value="Groups">
            <rich:menuItem submitMode="none"
                           onclick="window.location = '/GroupHub.do?groupCategory=COMPATIBLE'">
                <h:outputText value="#{msg['resource.hub.filter.compatibleGroups']}"/>
            </rich:menuItem>

            <rich:menuItem submitMode="none" onclick="window.location = '/GroupHub.do?groupCategory=MIXED'">
                <h:outputText value="#{msg['resource.hub.filter.mixedGroups']}"/>
            </rich:menuItem>

            <rich:menuItem submitMode="none" onclick="window.location = '/rhq/definition/group/list.xhtml'">
                <h:outputText value="#{msg['resource.hub.filter.groupDefinitions']}"/>
            </rich:menuItem>
        </rich:menuGroup>

        <rich:menuSeparator/>

        <rich:menuGroup value="Subsystem Views">

            <rich:menuItem submitMode="none"
                           onclick="window.location = '/rhq/subsystem/layout/main.xhtml?tab=configurationUpdates'">Configuration Changes
            </rich:menuItem>

            <rich:menuItem submitMode="none"
                           onclick="window.location = '/rhq/subsystem/layout/main.xhtml?tab=problemResources'">Problem Resources
            </rich:menuItem>
            <rich:menuItem submitMode="none"
                           onclick="window.location = '/rhq/subsystem/layout/main.xhtml?tab=operations'">Operations
            </rich:menuItem>
            <rich:menuItem submitMode="none"
                           onclick="window.location = '/rhq/subsystem/layout/main.xhtml?tab=alerts'">Alerts
            </rich:menuItem>
            <rich:menuItem submitMode="none"
                           onclick="window.location = '/rhq/subsystem/layout/main.xhtml?tab=alertDefinitions'">Alert Definitions
            </rich:menuItem>

        </rich:menuGroup>

        <rich:menuSeparator/>

        <rich:menuItem submitMode="none" disabled="true">
            <h:outputText value="Search: " style="color: black;"/>


            <h:panelGroup>

                <h:inputText id="selectedResource" style="width: 250px;" immediate="true"/>

                <rich:suggestionbox id="resourceSelectBox" for="selectedResource" tokens=",[]"
                                    ajaxSingle="true" immediate="true"
                                    suggestionAction="#{ResourceSelectUIBean.autocomplete}"
                                    var="result" data="foo" fetchValue="#{result.resource.id}"
                                    nothingLabel="No matching resources found"
                                    style="background-color: #cccccc;"
                                    onselect="document.location.href='/rhq/resource/monitor/graphs.xhtml?id=' + #{rich:element('selectedResource')}.value"
                                    usingSuggestObjects="false" width="700" height="400">


                    <h:column>
                        <f:facet name="header">Avail</f:facet>
                        <h:graphicImage
                                value="/images/icon_available_#{result.availability == 'UP' ? 'green' : 'red'}.png"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">Resource</f:facet>
                        <h:outputText value="#{result.resource.name}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">Parent</f:facet>
                        <h:outputText value="#{result.parent.name}"/>
                    </h:column>

                </rich:suggestionbox>

            </h:panelGroup>


        </rich:menuItem>

    </rich:dropDownMenu>

    <rich:dropDownMenu>
        <f:facet name="label">
            <h:panelGroup>
                <h:outputLink value="/Admin.do">
                    <h:outputText value="#{msg['admin.admin.AdministrationTitle']}"/>
                </h:outputLink>
            </h:panelGroup>
        </f:facet>
        <rich:menuGroup value="Tools">
            <rich:menuItem submitMode="none"
                           onclick="window.location = '/admin/config/EditDefaults.do?mode=monitor&amp;viewMode=all'">
                <h:outputText value="Monitoring Defaults"/>
            </rich:menuItem>

            <rich:menuItem submitMode="none"
                           onclick="window.location = '/admin/license/LicenseAdmin.do?mode=view'">
                <h:outputText value="#{msg['header.license']}"/>
            </rich:menuItem>
        </rich:menuGroup>

        <rich:menuGroup value="Security">
            <rich:menuItem submitMode="none" onclick="window.location = '/admin/user/UserAdmin.do?mode=list'">
                <h:outputText value="Manage Users"/>
            </rich:menuItem>
            <rich:menuItem submitMode="none" onclick="window.location = '/admin/role/RoleAdmin.do?mode=list'">
                <h:outputText value="Manage Roles"/>
            </rich:menuItem>
        </rich:menuGroup>
    </rich:dropDownMenu>

    <rich:dropDownMenu>
        <f:facet name="label">
            <h:panelGroup>
                <h:outputText value="#{msg['header.help.link']}"/>
            </h:panelGroup>
        </f:facet>

        <rich:menuItem submitMode="none"
                       onclick="window.location = 'https://docs.jbosson.redhat.com/confluence/display/JON2/'"
                       target="blank_">
            <h:outputText value="Online Documentation"/>
        </rich:menuItem>

        <rich:menuItem submitMode="none"
                       onclick="window.location = 'https://support.redhat.com/jbossnetwork/restricted/addCase.html'"
                       target="blank_">
            <h:outputText value="Open a Support Case"/>
        </rich:menuItem>

        <rich:menuSeparator/>

        <rich:menuItem submitMode="none" id="aboutLink">
                <h:outputText value="#{msg['header.about.link']}"/>
                <rich:componentControl for="aboutPanel" attachTo="aboutLink" operation="show" event="onclick"/>
        </rich:menuItem>
    </rich:dropDownMenu>


</rich:toolBarGroup>


<rich:toolBarGroup location="right">

    <a4j:status id="commonStatus" layout="block"
                startStyle=" filter:alpha(opacity=85); -moz-opacity: 0.85; opacity: 0.85; vertical-align: middle;">
        <f:facet name="start">
            <img src="/images/ajax-loader.gif" alt="" style="vertical-align:middle;"/> <span
                style="vertical-align: middle;">Loading...</span>
        </f:facet>
    </a4j:status>


    <rich:dropDownMenu>
        <f:facet name="label">
            <h:panelGroup>
                <h:outputText value="Logged in as #{UserPreferencesUIBean.subject.name}"/>
            </h:panelGroup>
        </f:facet>
        <rich:menuItem submitMode="none" onclick="window.location = '/admin/user/UserAdmin.do?mode=edit&amp;u=#{UserPreferencesUIBean.subject.id}'">
            <h:outputText value="Edit Details"/>
        </rich:menuItem>

        <rich:menuItem submitMode="none" onclick="window.location = '/admin/user/UserAdmin.do?mode=editPass&amp;u=#{UserPreferencesUIBean.subject.id}'">
            <h:outputText value="Change Password"/>
        </rich:menuItem>

        <rich:menuSeparator/>

        <rich:menuItem submitMode="none" onclick="window.location = '/Logout.do'">
            <h:outputText value="Logout"/>
        </rich:menuItem>
    </rich:dropDownMenu>

    <!--       <div style="background-color: red; top: 0px; left: 450px; display: none;">
        <a4j:region renderRegionOnly="true" selfRendered="true">
            <h:form>
                <h:panelGrid columns="2">
                    <h:inputText id="myinput" value="#{UserPreferencesUIBean.leftResourceNavState}">
                        <a4j:support event="onblur" reRender="outtext"/>
                    </h:inputText>
                    <h:outputText id="outtext" value="#{UserPreferencesUIBean.leftResourceNavState}"/>
                </h:panelGrid>
            </h:form>
        </a4j:region>
    </div>-->

</rich:toolBarGroup>
</rich:toolBar>

<rich:modalPanel id="aboutPanel" resizeable="false" width="320" height="220">
    <f:facet name="header">
        <h:panelGroup>
            <h:outputText value="#{msg['about.Title']}"/>
        </h:panelGroup>
    </f:facet>
    <f:facet name="controls">
        <h:panelGroup>
            <h:graphicImage value="/images/close.png" style="cursor:pointer" id="hidelink"/>
            <rich:componentControl for="aboutPanel" attachTo="hidelink" operation="hide" event="onclick"/>
        </h:panelGroup>
    </f:facet>

    <p>
        <span class="DisplaySubhead"><h:outputText value="#{msg['footer.aboutLink']}"/></span><br/>
        <span class="DisplayLabel"><h:outputText
                value="#{msg['footer.version']}: #{msg['product.version']}"/></span><br/>
    <span class="DisplayLabel"><h:outputText
            value="#{msg['footer.buildNumber']}: #{msg['product.buildNumber']}"/></span>
    </p>

    <p>
        <f:verbatim><h:outputText value="#{msg['footer.copyright']}"/></f:verbatim> <h:outputText
            value="#{msg['about.Copyright.Content']}"/>
    </p>

    <p>
        <h:outputText value="#{msg['about.MoreInfo.Label']}"/><br/>
        <!--
                <a href='mailto:<h:outputText value="#{msg['about.MoreInfo.LinkSales']}"/>'><h:outputText value="#{msg['about.MoreInfo.LinkSales']}"/></a><br/>
                <a href='mailto:<h:outputText value="#{msg['about.MoreInfo.LinkSupport']}"/>'><h:outputText value="#{msg['about.MoreInfo.LinkSupport']}"/></a>
        -->
    </p>

    <input type="button" value="Ok" onclick="Richfaces.hideModalPanel('aboutPanel');"/>
</rich:modalPanel>


</h:form>

</a4j:region>