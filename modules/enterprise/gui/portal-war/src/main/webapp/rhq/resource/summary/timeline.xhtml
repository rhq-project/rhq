<?xml version="1.0"?>

<!DOCTYPE html
      PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:onc="http://jboss.org/on/component"
      xmlns:onf="http://jboss.org/on/function"
      xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
      xmlns:rich="http://richfaces.ajax4jsf.org/rich">

<ui:composition template="/rhq/resource/layout/main.xhtml">

<ui:param name="pageTitle" value="#{ResourceUIBean.resourceType.name} '#{ResourceUIBean.name}' - Summary"/>
<ui:param name="selectedTabName" value="Summary.Timeline"/>

<ui:define name="content">

      <rich:panel styleClass="BlockContent">
         <f:facet name="header">
            Quick Counts
         </f:facet>
         <h:outputText value="*Note: all quick counts reflect what happened to the resource between the specified metric display range." />
         <br /><br />
         <ui:repeat var="summaryInfoEntry" value="#{ResourceUIBean.summaryInfo}"> 
            <h:outputText value="#{summaryInfoEntry.lefty} - #{summaryInfoEntry.righty}" /><br />
         </ui:repeat>
         <hr />

      </rich:panel>

      <h:form id="resourceTimelineForm">
         <input type="hidden" name="id" value="${param.id}"/>

         <rich:panel styleClass="BlockContent">
            <f:facet name="header">
               <h:outputText value="Resource Timeline"/>
            </f:facet>

            <h:panelGrid columns="1" width="100%">
               <iframe src ="/resource/common/monitor/events/EventsView.jsp?id=#{param.id}" 
                       width="100%" height="550" scrolling="no" frameborder="0" />
            </h:panelGrid>
            
         </rich:panel>
      </h:form>
      
      <h:form id="metricDisplayRangeForm" >
         <input type="hidden" name="id" value="${param.id}"/>
         <table>
            <tr>
               <td><onc:metric optionList="m,h,d" /></td>
               <td>
                  <h:commandLink rendered="#{not MetricComponentUtilityUIBean.readOnly}"
                                action="#{MetricComponentUtilityUIBean.update}" >
                     <img src="/images/dash-button_go-arrow.gif" alt="Apply Metric Settings "/>
                  </h:commandLink>
                  <h:commandLink rendered="#{MetricComponentUtilityUIBean.readOnly}" 
                                action="#{MetricComponentUtilityUIBean.switchToSimpleMode}">
                     <h:outputText value="Switch to Simple Mode" />
                  </h:commandLink>
               </td>
            </tr>
         </table>
      </h:form>

</ui:define>

</ui:composition>

</html>
