<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE plugin [

        <!ENTITY logSources '
    <c:group name="event" displayName="Events">
        <c:list-property name="logEventSources">
            <c:map-property name="logEventSource">
                <c:simple-property name="logFilePath" type="file" summary="true"
                                   description="The absolute path to the source log file."/>
                <c:simple-property name="enabled" type="boolean" summary="true"
                                   description="A flag indicating whether of not this log Event source is currently
                                                enabled (i.e. whether the associated log file should be tailed for
                                                new entries)."/>
                <c:simple-property name="dateFormat" required="false"
                                   description="The date format to use when parsing the dates in log entries. The
                                                format must be in the syntax defined by the Java SimpleDateFormat
                                                class. If not specified, the three date formats that are predefined
                                                by Log4J (ISO8601, DATE, and ABSOLUTE) will be tried."/>
                <c:simple-property name="includesPattern" required="false"
                                   description="A regular expression against which a log entrys detail is matched
                                                to determine if an Event should be fired for that entry. If not
                                                specified, no filtering of log entries will be done based on their
                                                detail."/>
                <c:simple-property name="minimumSeverity" required="false" default="error"
                                   description="The minimum severity of Events that should be collected for this
                                                source. If not specified, there is no minimum severity (i.e. all
                                                events will be collected).">
                    <c:property-options>
                       <c:option name="debug" value="debug"/>
                       <c:option name="info"  value="info"/>
                       <c:option name="warn"  value="warn"/>
                       <c:option name="error" value="error"/>
                       <c:option name="fatal" value="fatal"/>
                    </c:property-options>
                </c:simple-property>
            </c:map-property>
        </c:list-property>
    </c:group>
'>

        ]>

<plugin name="jboss-as-7"
        displayName="JBoss-AS-7-Plugin"
        description="Management of JBossAS 7"
        package="org.rhq.modules.plugins.jbossas7"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="urn:xmlns:rhq-plugin"
        xmlns:c="urn:xmlns:rhq-configuration"
        version="4.0.0-SNAPSHOT"
        >

<!--    <depends plugin="JMX" useClasses="true"/> -->


    <!-- TODO I think we should introduce an abstract AS7 plugin that contains some base functionality and then
      ~~      additional 'Personalities' for the kinds of servers (PM, SM, Standalone AS, Managed AS)
      -->

    <server name="ProcessController"
            discovery="BaseProcessDiscovery"
            class="BaseComponent"
            description="Reaper process for other AS7 servicees"
            >

        <plugin-configuration>
            <c:simple-property name="hostname" default="localhost" required="true"/>
            <c:simple-property name="port" default="9990" type="integer" required="true"/>

            &logSources;
        </plugin-configuration>

        <process-scan name="ProcessController" query="process|basename|match=^java.*,arg|org.jboss.as.process-controller|match=.*"/>


        <operation name="dummyOperation">
            <!-- TODO supply parameters and return values -->
        </operation>


    </server>
    <server name="HostController"
            discovery="BaseProcessDiscovery"
            class="BaseComponent"
            description="Domain controller (delegate) for this host"
            >

        <plugin-configuration>
            <c:simple-property name="hostname" default="localhost" required="true"/>
            <c:simple-property name="port" default="9990" type="integer" required="true"/>

            &logSources;
        </plugin-configuration>

        <process-scan name="HostController" query="process|basename|match=^java.*,arg|org.jboss.as.host-controller|match=.*"/>


        <operation name="domain:shutdown" displayName="Shutdown Domain" description="Shut this Host-/Domaincontroller down with all managed servers.">
        </operation>

        <operation name="server-group:add" displayName="Add ServerGroup" description="Add a server group to the Domain.">
            <parameters>
                <c:simple-property name="name" description="Name of Group to add"/>
                <c:simple-property name="profile" description="Profile to add this group to"/>
            </parameters>
        </operation>
        <operation name="server-group:remove" displayName="Remove ServerGroup" description="Remove a server group from the Domain.">
            <parameters>
                <c:simple-property name="name" description="Name of Group to add"/>
            </parameters>
        </operation>
        <operation name="managed-server:add" displayName="Add managed server" description="Add a new managed server">
            <parameters>
                <c:simple-property name="servername" displayName="Name of the new server" required="true"/>
                <c:simple-property name="hostname" displayName="Name of the host to put the server on" required="true"/>
                <c:simple-property name="server-group" displayName="Server group to add to" required="true"/>
                <c:simple-property name="socket-bindings" displayName="Socket bindings to base upon" default="standard-sockets" description="Socket bindings to base upon"/>
                <c:simple-property name="port-offset" displayName="Port offset" default="0" type="integer" />
                <c:simple-property name="auto-start" displayName="Autostart" default="false" type="boolean" />
            </parameters>
            <results>
                <c:simple-property name="result" description="Outcome of the create server operation"/>
            </results>
        </operation>
        <operation name="managed-server:remove" displayName="Remove managed server" description="Remove a managed server">
            <parameters>
                <c:simple-property name="servername" displayName="Name of the server to remove" required="true"/>
                <c:simple-property name="hostname" displayName="Name of the host where the server is on" required="true"/>
            </parameters>
            <results>
                <c:simple-property name="result" description="Outcome of the remove server operation"/>
            </results>

        </operation>


        <server name="Profile"
                description="One profile in a domain"
                discovery="SubsystemDiscovery"
                class="BaseComponent">

            <plugin-configuration>
                <c:simple-property name="path" default="profile" readOnly="true"/>
            </plugin-configuration>
        </server>
        <server name="ServerGroup"
                description="Server groups on this domain"
                discovery="SubsystemDiscovery"
                class="ServerGroupComponent"
                >
            <!-- TODO move operation to createDeletePolicy="create-only" -->

            <plugin-configuration>
                <c:simple-property name="path" default="server-group" readOnly="true"/>
            </plugin-configuration>


            <content name="deployment" category="deployable" isCreationType="true" description="Deployments on this domain">
            </content>

            <resource-configuration>
                <c:simple-property name="profile" />
                <c:simple-property name="socket-binding-group"/>
                <c:simple-property name="jvm" required="false"/>
            </resource-configuration>

            <service name="Deployment"
                     class="BaseComponent"
                     discovery="SubsystemDiscovery"
                     createDeletePolicy="both"
                     creationDataType="content">
                <plugin-configuration>
                    <c:simple-property name="path" default="deployment" readOnly="true"/>
                </plugin-configuration>

                <content name="file" category="deployable" isCreationType="true" description="Deployments on this domain">
                    <configuration>
                       <c:group name="deployment" displayName="Deployment Options">
                           <c:simple-property name="runtimeName" required="true"/>
                           <c:simple-property name="alreadyUploaded" type="boolean" description="Was this already uploaded to the Domain? TODO"/>
                       </c:group>
                    </configuration>
                </content>

            </service>
        </server>
        <server name="Host"
                description="Host involved in this domain"
                discovery="SubsystemDiscovery"
                class="DomainComponent"
                >
            <plugin-configuration>
                <c:simple-property name="path" default="host" readOnly="true"/>
            </plugin-configuration>

            <operation name="server:add" displayName="Create server" description="Add a new server to this host.">
                <parameters>
                    <c:simple-property name="name" description="Name of this new server" required="true"/>
                    <c:simple-property name="group" displayName="Server Group" description="Server group to put this sever in" default="" required="false"/>
                    <c:simple-property name="auto-start" displayName="Autostart" description="Should this server start at boot?" type="boolean" default="false" required="true"/>
                </parameters>
                <results>
                    <c:simple-property name="result" description="Outcome of the create server operation"/>
                </results>
            </operation>
            <operation name="server:remove" displayName="Delete server" description="Deletes a server on this host.">
                <parameters>
                    <c:simple-property name="name" description="Name of this new server" required="true"/>
                </parameters>
                <results>
                    <c:simple-property name="result" description="Outcome of the delete server operation"/>
                </results>
            </operation>
        </server>

        <service name="DomainDeployment"
                 class="BaseComponent"
                 discovery="SubsystemDiscovery"
                 createDeletePolicy="both"
                 creationDataType="content">
            <plugin-configuration>
                <c:simple-property name="path" default="deployment" readOnly="true"/>
            </plugin-configuration>

            <content name="file" category="deployable" isCreationType="true" description="Deployments on this domain">
            </content>

            <resource-configuration>
                <c:simple-property name="name" readOnly="true"/>
                <c:simple-property name="runtime-name" readOnly="true"/>
                <c:simple-property name="hash" readOnly="true"/>
            </resource-configuration>
        </service>
    </server>

    <server name="JBossAS7-Standalone"
            discovery="BaseProcessDiscovery"
            class="BaseComponent"
            >

        <plugin-configuration>
            <c:simple-property name="hostname" default="localhost" required="true"/>
            <c:simple-property name="port" default="9990" type="integer" required="true"/>
            <c:list-property name="system-properties">
                <c:map-property name="system-property">
                    <c:simple-property name="key" readOnly="true"/>
                    <c:simple-property name="value" readOnly="true"/>
                </c:map-property>
            </c:list-property>
            &logSources;
        </plugin-configuration>

        <process-scan name="StandaloneAS" query="process|basename|match=^java.*,arg|org.jboss.as.standalone|match=.*"/>


        <resource-configuration>
            <c:list-property name="schema-locations" displayName="Schema locations">
                <c:map-property name="location">
                    <c:simple-property name="urn" readOnly="true"/>
                    <c:simple-property name="location" readOnly="true"/>
                </c:map-property>
            </c:list-property>
            <c:list-property name="extension" displayName="Installed extensions">
                <c:simple-property name="name" readOnly="true"/>
            </c:list-property>
        </resource-configuration>



    </server>

    <server name="JBossAS-Managed"
            discovery="ManagedASDiscovery"
            class="DomainComponent"
            >
        <plugin-configuration>
            <c:simple-property name="hostname" default="localhost" displayName="Management host" required="true"/>
            <c:simple-property name="port" default="9990" type="integer" displayName="Management port" required="true"/>
            <c:simple-property name="domainHost" readOnly="true" description="Hostname in the domain"/>
            <c:simple-property name="group" readOnly="true" displayName="Server Group" description="Server Group this instance belongs to."/>
            <c:simple-property name="socket-binding-group" readOnly="true" displayName="Socket binding group" description="Socket bindngs to use"/>
            <c:simple-property name="socket-binding-port-offset" readOnly="true" displayName="Port Offset" type="integer" default="0" description="Offset to the base ports"/>

            &logSources;
        </plugin-configuration>

        <!-- Scan for host controller is intentional -->
        <process-scan name="HostController" query="process|basename|match=^java.*,arg|org.jboss.as.host-controller|match=.*"/>
        <process-scan name="ManagedAS" query="process|basename|match=^java.*,arg|org.jboss.as.server|match=.*"/>

        <operation name="server:start" description="Start this server instance." displayName="Start">
            <results>
                <c:simple-property name="operationResult"/>
            </results>
        </operation>
        <operation name="server:stop" description="Stop this server instance." displayName="Stop">
            <results>
                <c:simple-property name="operationResult"/>
            </results>
        </operation>
        <operation name="server:restart" description="Restart this server instance." displayName="Restart">
            <results>
                <c:simple-property name="operationResult"/>
            </results>
        </operation>



    </server>


<!--
    <server name="JBoss AS JVM"
            description="JVM of the standalone JBossAS"
            sourcePlugin="JMX"
            sourceType="JMX Server"
            discovery="org.rhq.plugins.jmx.LocalJMXServerDiscoveryComponent"
            class="org.rhq.plugins.jmx.JMXServerComponent"
            singleton="true"
    >
        <runs-inside>
            <parent-resource-type name="JBossAS-Managed"  plugin="jboss-as-7"/>
            <parent-resource-type name="JBossAS7-Standalone"  plugin="jboss-as-7"/>
            <parent-resource-type name="ProcessController"  plugin="jboss-as-7"/>
        </runs-inside>
    </server>
-->

    <server name="Messaging"
            discovery="SubsystemDiscovery"
            class="DomainComponent"
            description="The underlying HornetQ based messaging subsystem"
            singleton="true"
            >
        <runs-inside>
            <parent-resource-type name="Profile"  plugin="jboss-as-7"/>
            <parent-resource-type name="JBossAS7-Standalone"  plugin="jboss-as-7"/>
        </runs-inside>

        <plugin-configuration>
            <c:simple-property name="path" readOnly="true" default="subsystem=messaging"/>
        </plugin-configuration>

        <operation name="destination:add" displayName="Add destination" description="Add a Queue or Topic">
            <parameters>
                <c:simple-property name="name" description="Name of the Destination" required="true"/>
                <c:simple-property name="queue-address" description="The queue address defines what address is used for routing messages." required="true"/>
                <c:simple-property name="type" description="Type of Destination to create" default="Queue">
                    <c:property-options>
                        <c:option value="Queue"/>
                        <c:option value="Topic"/>
                    </c:property-options>
                </c:simple-property>
                <c:simple-property name="filter" description="The queue message filter definition."/>
                <c:simple-property name="durable" description="Defines whether the queue is durable." type="boolean" default="false"/>
            </parameters>
            <results>
                <c:simple-property name="operationResult"/>
            </results>
        </operation>
        <operation name="destination:remove" displayName="Remove Destination" description="Remove a destination">
            <parameters>
                <c:simple-property name="name" description="Name of the Destination" required="true"/>
            </parameters>
            <results>
                <c:simple-property name="operationResult"/>
            </results>
        </operation>

        <resource-configuration>
            <c:simple-property name="journal-min-files" />
            <c:simple-property name="journal-type" />
        </resource-configuration>


        <service name="Acceptor"
                 discovery="SubsystemDiscovery"
                 class="BaseComponent"
                >
            <plugin-configuration>
                <c:simple-property name="path" readOnly="true" default="acceptor"/>
            </plugin-configuration>
        </service>
        <service name="MessagingConnector"
                 discovery="SubsystemDiscovery"
                 class="BaseComponent"
                >
            <plugin-configuration>
                <c:simple-property name="path" readOnly="true" default="connector"/>
            </plugin-configuration>
        </service>
        <service name="HQueue"
                 discovery="SubsystemDiscovery"
                 class="BaseComponent"
                >
            <plugin-configuration>
                <c:simple-property name="path" readOnly="true" default="queue"/>
            </plugin-configuration>
            <resource-configuration>
                <c:simple-property name="queue-address" required="true"/>
                <c:simple-property name="filter" />
                <c:simple-property name="durable" type="boolean"/>
            </resource-configuration>

        </service>
    </server>

    <server name="JMS"
            discovery="SubsystemDiscovery"
            class="DomainComponent"
            description="The JMS messaging subsystem"
            singleton="true"
            >
        <runs-inside>
            <parent-resource-type name="Profile"  plugin="jboss-as-7"/>
            <parent-resource-type name="JBossAS7-Standalone"  plugin="jboss-as-7"/>
        </runs-inside>

        <plugin-configuration>
            <c:simple-property name="path" readOnly="true" default="subsystem=jms"/>
        </plugin-configuration>

        <service name="Queue"
            discovery="SubsystemDiscovery"
            class="BaseComponent"
            >
            <plugin-configuration>
                <c:simple-property name="path" readOnly="true" default="queue"/>
            </plugin-configuration>
        </service>
        <service name="Topic"
            discovery="SubsystemDiscovery"
            class="BaseComponent"
            >
            <plugin-configuration>
                <c:simple-property name="path" readOnly="true" default="topic"/>
            </plugin-configuration>
        </service>
        <service name="Connection-Factory"
            discovery="SubsystemDiscovery"
            class="BaseComponent"
            >
            <plugin-configuration>
                <c:simple-property name="path" readOnly="true" default="connection-factory"/>
            </plugin-configuration>
        </service>

    </server>

    <server name="JBossWeb"
            discovery="SubsystemDiscovery"
            class="BaseComponent"
            singleton="true"
            >

        <runs-inside>
            <parent-resource-type name="Profile"  plugin="jboss-as-7"/>
            <parent-resource-type name="JBossAS7-Standalone"  plugin="jboss-as-7"/>
        </runs-inside>

        <plugin-configuration>
            <c:simple-property name="path" readOnly="true" default="subsystem=web"/>
        </plugin-configuration>

        <service name="Connector"
                 discovery="SubsystemDiscovery"
                 class="BaseComponent"
                >
            <plugin-configuration>
                <c:simple-property name="path" readOnly="true" default="connector"/>
            </plugin-configuration>


            <metric property="bytesSent" measurementType="trendsup"/>
            <metric property="bytesReceived" measurementType="trendsup"/>
            <metric property="processingTime" measurementType="trendsup"/>
            <metric property="errorCount" measurementType="trendsup" displayType="summary"/>
            <metric property="maxTime" />
            <metric property="requestCount" measurementType="trendsup" displayType="summary"/>

            <resource-configuration>
                <c:simple-property name="protocol" required="false" description="The web connector protocol."/>
                <c:simple-property name="socket-binding" required="false" description="The web connector socket-binding reference, this connector should be bound to."/>
                <c:simple-property name="scheme" required="false" description="The web connector scheme"/>
            </resource-configuration>

        </service>

        <service name="VHost"
                 discovery="SubsystemDiscovery"
                 class="BaseComponent">
            <plugin-configuration>
                <c:simple-property name="path" readOnly="true" default="virtual-server"/>
            </plugin-configuration>

            <resource-configuration>
                <c:simple-property name="access-log"/>
                <c:list-property name="alias" description="The virtual server aliases">
                    <c:simple-property name="alias"/>
                </c:list-property>
                <c:simple-property name="rewrite"/>
            </resource-configuration>

        </service>


    </server>

    <server name="General JCA connectors"
            discovery="SubsystemDiscovery"
            class="BaseComponent"
            singleton="true"
            description="General settings of the JCA engine. Not nexessarily for end-users"
            >

        <runs-inside>
            <parent-resource-type name="Profile"  plugin="jboss-as-7"/>
            <parent-resource-type name="JBossAS7-Standalone"  plugin="jboss-as-7"/>
        </runs-inside>

        <plugin-configuration>
            <c:simple-property name="path" readOnly="true" default="subsystem=connector"/>
        </plugin-configuration>

        <resource-configuration>
            <c:simple-property name="default-workmanager-short-running-thread-pool" required="true" type="string" readOnly="true"
                               description="Specify the name of short running thread pool"/>
            <c:simple-property name="default-workmanager-long-running-thread-pool" required="true" type="string" readOnly="true"
                               description="Specify the name of long running thread pool"/>
            <c:simple-property name="bean-validation-enabled" required="true" type="boolean" readOnly="true"
                               description="Specify whether bean validation is enabled"/>
            <c:simple-property name="archive-validation-enabled" type="boolean" readOnly="true" description="Enabling the validation"/>
            <c:simple-property name="archive-validation-fail-on-error" type="boolean" readOnly="true" default="true"
                               description="Should an archive validation error report fail the deployment. Default: true"/>
            <c:simple-property name="archive-validation-fail-on-warn" type="boolean" readOnly="true" default="false"
                               description="Should an archive validation warning report fail the deployment. Default: false"/>
            <c:simple-property name="cached-connection-manager-debug" type="boolean" readOnly="true"
                               description="enable/disable debug information logging for cached connection manager"/>
            <c:simple-property name="cached-connection-manager-error" type="boolean" readOnly="true"
                               description="enable/disable error information logging for cached connection manager"/>
        </resource-configuration>

    </server>

    <server name="Datasources"
            discovery="SubsystemDiscovery"
            class="BaseComponent"
            singleton="true"
            >

        <runs-inside>
            <parent-resource-type name="Profile"  plugin="jboss-as-7"/>
            <parent-resource-type name="JBossAS7-Standalone"  plugin="jboss-as-7"/>
        </runs-inside>

        <plugin-configuration>
            <c:simple-property name="path" readOnly="true" default="subsystem=datasources"/>
        </plugin-configuration>

        <service name="DataSource"
                 discovery="SubsystemDiscovery"
                 class="BaseComponent"
                 singleton="true"
                >

            <plugin-configuration>
                <c:simple-property name="path" readOnly="true" default="data-source"/>
            </plugin-configuration>

            <metric property="PreparedStatementCacheCurrentSize"
                    description="The number of prepared and callable statements currently cached in the statement cache"/>
            <metric property="PreparedStatementCacheMissCount"
                    description="The number of times that a statement request could not be satisfied with a statement from the cache"/>
            <metric property="PreparedStatementCacheAddCount" description="The number of statements added to the statement cache"/>
            <metric property="PreparedStatementCacheAccessCount" description="The number of times that the statement cache was accessed"/>
            <metric property="PreparedStatementCacheDeleteCount" description="The number of statements discarded from the cache"/>
            <metric property="PreparedStatementCacheHitCount" description="The number of times that statements from the cache were used"/>
            <metric property="AverageBlockingTime" description="The average time spent blocking for a connection"/>
            <metric property="MaxWaitTime" description="The maximum wait time for a connection"/>
            <metric property="ActiveCount" description="The active count"/>
            <metric property="CreatedCount" description="The created count"/>
            <metric property="MaxCreationTime" description="The maximum time for creating a physical connection"/>
            <metric property="MaxWaitCount" description="The maximum number of threads waiting for a connection"/>
            <metric property="TotalCreationTime" description="The total time spent creating physical connections"/>
            <metric property="AvailableCount" description="The available count"/>
            <metric property="MaxUsedCount" description="The maximum number of connections used"/>
            <metric property="TimedOut" description="The timed out count"/>
            <metric property="TotalBlockingTime" description="The total blocking time"/>
            <metric property="AverageCreationTime" description="The average time spent creating a physical connection"/>
            <metric property="DestroyedCount" description="The destroyed count"/>

            <resource-configuration>
                <c:simple-property name="connection-url" required="true" type="string" readOnly="true" description="The JDBC driver connection URL"/>
                <c:simple-property name="driver-class" required="true" type="string" readOnly="true"
                         description="The fully qualifed name of the JDBC driver class"/>
                <c:simple-property name="jndi-name" required="true" type="string" readOnly="true"
                         description="Specifies the JNDI name for the datasource"/>
                <c:simple-property name="driver" required="true" type="string" readOnly="true"
                         description="Defines the JDBC driver the datasource should use with this format: &lt;driver-name>#&lt;major-version>.&lt;minor-version> where &lt;driver-name> is the fully qualifed name of the JDBC driver class"/>
                <c:simple-property name="new-connection-sql" type="string" readOnly="true"
                         description="Specifies an SQL statement to execute whenever a connection is added to the connection pool."/>
                <c:simple-property name="pool-name" type="string" readOnly="true"
                         description="Specifies the pool name for the datasource used for management"/>
                <c:simple-property name="url-delimiter" type="string" readOnly="true"
                         description="Specifies the delimeter for URLs in connection-url for HA datasources"/>
                <c:simple-property name="url-selector-strategy-class-name" type="string" readOnly="true"
                         description="A class that implements org.jboss.jca.adapters.jdbc.URLSelectorStrategy"/>
                <c:simple-property name="use-java-context" type="boolean" readOnly="true"
                         description="Setting this to false will bind the DataSource into global JNDI;"/>
                <c:simple-property name="enabled" type="string" readOnly="true" description="Specifies if the datasource should be enabled"/>
                <c:simple-property name="max-pool-size" type="integer" readOnly="false"
                         description="The max-pool-size element indicates the maximum number of connections for a pool. No more connections will be created in each sub-pool."/>
                <c:simple-property name="min-pool-size" type="integer" readOnly="false"
                         description="The min-pool-size element indicates the minimum number of connections a pool should hold. These are not created until a Subject is known from a request for a connection."/>
                <c:simple-property name="pool-prefill" type="boolean" readOnly="false"
                         description="Whether to attempt to prefill the connection pool. Changing this value require a server restart."/>
                <c:simple-property name="pool-use-strict-min" type="boolean" readOnly="false"
                         description="Define if the min-pool-size should be considered a strictly."/>
                <c:simple-property name="user-name" type="string" readOnly="true"
                         description="Specify the username used when creating a new connection."/>
                <c:simple-property name="password" type="password" readOnly="true"
                         description="Specify the passwprd used when creating a new connection."/>
                <c:simple-property name="prepared-statements-cacheSize" type="long" readOnly="true"
                         description="The number of prepared statements per connection in an LRU cache"/>
                <c:simple-property name="share-prepared-statements" type="boolean" readOnly="true"
                         description="Whether to share prepare statements, i.e. whether asking for same statement twice without closing uses the same underlying prepared statement"/>
                <c:simple-property name="track-statements" type="string" readOnly="true"
                         description="Whether to check for unclosed statements when a connection is returned to the pool and result sets are closed when a statement is closed/return to the prepared statement cache. valid values are: false - do not track statements and results true - track statements and result sets and warn when they are not closed nowarn - track statements but do no warn about them being unclosed"/>
                <c:simple-property name="allocation-retry" type="integer" readOnly="true"
                         description="The allocation retry element indicates the number of times that allocating a connection should be tried before throwing an exception."/>
                <c:simple-property name="allocation-retry-wait-millis" type="long" readOnly="true"
                         description="Indicates the time in milliseconds to wait between retrying to allocate a connection."/>
                <c:simple-property name="blocking-timeout-wait-millis" type="long" readOnly="false"
                         description="The blocking-timeout-millis element indicates the maximum time in milliseconds to block while waiting for a connection before throwing an exception. Note that this blocks only while waiting for a permit for a connection, and will never throw an exception if creating a new connection takes an inordinately long time."/>
                <c:simple-property name="idle-timeout-minutes" type="long" readOnly="false"
                         description="The idle-timeout-minutes elements indicates the maximum time in minutes a connection may be idle before being closed. The actual maximum time depends also on the IdleRemover scan time, which is 1/2 the smallest idle-timeout-minutes of any pool. Changing this value require a server restart."/>
                <c:simple-property name="query-timeout" type="long" readOnly="true"
                         description="Any configured query timeout in seconds The default is no timeout"/>
                <c:simple-property name="use-try-lock" type="long" readOnly="true"
                         description="Any configured timeout for internal locks on the resource adapter objects in seconds"/>
                <c:simple-property name="set-tx-query-timeout" type="boolean" readOnly="true"
                         description="Whether to set the query timeout based on the time remaining until transaction timeout, any configured query timeout will be used if there is no transaction."/>
                <c:simple-property name="transaction-isolation" type="string" readOnly="true"
                         description="Set java.sql.Connection transaction isolation level to use. The constants defined by transaction-isolation-values are the possible transaction isolation levels and include: TRANSACTION_READ_UNCOMMITTED TRANSACTION_READ_COMMITTED TRANSACTION_REPEATABLE_READ TRANSACTION_SERIALIZABLE TRANSACTION_NONE"/>
                <c:simple-property name="check-valid-connection-sql" type="string" readOnly="true"
                         description="Specify an SQL statement to check validity of a pool connection. This may be called when managed connection is taken from pool for use."/>
                <c:simple-property name="exception-sorter-class-name" type="string" readOnly="true"
                         description="An org.jboss.jca.adapters.jdbc.ExceptionSorter that provides a boolean isExceptionFatal(SQLException e) method to validate is an exception should be broadcast to all javax.resource.spi.ConnectionEventListener as a connectionErrorOccurred"/>
                <c:simple-property name="stale-connection-checker-class-name" type="string" readOnly="true"
                         description="An org.jboss.jca.adapters.jdbc.StaleConnectionChecker that provides a boolean isStaleConnection(SQLException e) method which if it it returns true will wrap the exception in an org.jboss.jca.adapters.jdbc.StaleConnectionException"/>
                <c:simple-property name="valid-connection-checker-class-name" type="string" readOnly="true"
                         description="An org.jboss.jca.adapters.jdbc.ValidConnectionChecker that provides a SQLException isValidConnection(Connection e) method to validate is a connection is valid. An exception means the connection is destroyed. This overrides the check-valid-connection-sql when present."/>
                <c:simple-property name="background-validation-minutes" type="long" readOnly="false"
                         description="The background-validation-minutes element specifies the amount of time, in minutes, that background validation will run. Changing this value require a server restart."/>
                <c:simple-property name="background-validation" type="boolean" readOnly="false"
                         description="An element to specify that connections should be validated on a background thread versus being validated prior to use. Changing this value require a server restart."/>
                <c:simple-property name="use-fast-fail" type="boolean" readOnly="false"
                         description="Whether fail a connection allocation on the first connection if it is invalid (true) or keep trying until the pool is exhausted of all potential connections (false)"/>
                <c:simple-property name="validate-on-match" type="boolean" readOnly="true"
                         description="The validate-on-match element indicates whether or not connection level validation should be done when a connection factory attempts to match a managed connection for a given set. This is typically exclusive to the use of background validation"/>
                <c:simple-property name="spy" type="boolean" readOnly="true" description="whatever spy or not the jdbc connection"/>
            </resource-configuration>
        </service>

        <service name="XADataSource"
                 discovery="SubsystemDiscovery"
                 class="BaseComponent"
                 singleton="true"
                >

            <plugin-configuration>
                <c:simple-property name="path" readOnly="true" default="xa-data-source"/>
            </plugin-configuration>
        </service>

        <service name="JdbcDriver"
                 discovery="SubsystemDiscovery"
                 class="BaseComponent"
                 singleton="true"
                >

            <plugin-configuration>
                <c:simple-property name="path" readOnly="true" default="jdbc-driver"/>
            </plugin-configuration>
        </service>

    </server>

    <server name="ResourceAdapters"
            discovery="SubsystemDiscovery"
            class="BaseComponent"
            singleton="true"
            >

        <runs-inside>
            <parent-resource-type name="Profile"  plugin="jboss-as-7"/>
            <parent-resource-type name="JBossAS7-Standalone"  plugin="jboss-as-7"/>
        </runs-inside>

        <plugin-configuration>
            <c:simple-property name="path" readOnly="true" default="subsystem=resource-adapters"/>
        </plugin-configuration>
    </server>


    <server name="Threads"
        discovery="SubsystemDiscovery"
        class="BaseComponent"
        singleton="true"
        >

        <runs-inside>
            <parent-resource-type name="Profile"  plugin="jboss-as-7"/>
            <parent-resource-type name="JBossAS7-Standalone"  plugin="jboss-as-7"/>
        </runs-inside>

        <plugin-configuration>
            <c:simple-property name="path" readOnly="true" default="subsystem=threads"/>
        </plugin-configuration>

        <service name="ThreadFactory"
                 discovery="SubsystemDiscovery"
                 class="BaseComponent"
                 singleton="true"
                >

            <plugin-configuration>
                <c:simple-property name="path" readOnly="true" default="thread-factory"/>
            </plugin-configuration>

            <resource-configuration>
                <c:simple-property name="name" required="true" type="string" readOnly="true" description="The bean name of the created thread factory."/>
                <c:simple-property name="group-name" type="string" readOnly="false"
                         description="Specifies the name of a the thread group to create for this thread factory."/>
                <c:simple-property name="thread-name-pattern" type="string" readOnly="false"
                         description="The template used to create names for threads.  The following patterns may be used:
                    %% - emit a percent sign
                    %t - emit the per-factory thread sequence number
                    %g - emit the global thread sequence number
                    %f - emit the factory sequence number
                    %i - emit the thread ID."/>
                <c:simple-property name="priority" type="integer" readOnly="false"
                         description="May be used to specify the thread priority of created threads."/>
                <c:list-property name="properties" >
                    <c:simple-property name="properties" />  <!-- TODO list of maps ? -->
                </c:list-property>
            </resource-configuration>
        </service>

        <service name="ThreadPool"
                 discovery="SubsystemDiscovery"
                 class="BaseComponent"
                 singleton="true"
                >

            <plugin-configuration>
                <c:simple-property name="path" readOnly="true" default="bounded-queue-thread-pool|queueless-thread-pool|scheduled-thread-pool|unbounded-queue-thread-pool"/>
            </plugin-configuration>
        </service>




    </server>

    <server name="Webservices"
        discovery="SubsystemDiscovery"
        class="BaseComponent"
        singleton="true"
        >

        <runs-inside>
            <parent-resource-type name="Profile"  plugin="jboss-as-7"/>
            <parent-resource-type name="JBossAS7-Standalone"  plugin="jboss-as-7"/>
        </runs-inside>

        <plugin-configuration>
            <c:simple-property name="path" readOnly="true" default="subsystem=webservices"/>
        </plugin-configuration>

        <resource-configuration>
            <c:simple-property name="modify-soap-address" required="true" type="boolean" readOnly="true"
                               description="Whether the soap address can be modified."/>
            <c:simple-property name="webservice-host" required="true" type="string" readOnly="true"
                               description="The WSDL, that is a required deployment artifact for an endpoint, has a &amp;soap:address> element which points to the location of the endpoint. JBoss supports rewriting of that SOAP address. If the content of &amp;soap:address> is a valid URL, JBossWS will not rewrite it unless 'modifySOAPAddress' is true. If the content of &amp;soap:address> is not a valid URL, JBossWS will rewrite it using the attribute values given below. If 'webServiceHost' is set to 'jbossws.undefined.host', JBossWS uses requesters host when rewriting the &amp;soap:address>"/>
            <c:simple-property name="webservice-port" type="integer" readOnly="true"
                               description="The non-secure port that will be used for rewriting the SOAP address. If absent the port will be identified by querying the list of installed connectors."/>
            <c:simple-property name="webservice-secure-port" type="integer" readOnly="true"
                               description="The non-secure port that will be used for rewriting the SOAP address. If absent the port will be identified by querying the list of installed connectors."/>
        </resource-configuration>
    </server>

    <service name="NetworkInterface"
             discovery="SubsystemDiscovery"
             class="BaseComponent"
             description="A named network interface, along with required criteria for determining the IP address to associate with that interface">

        <runs-inside>
            <parent-resource-type name="HostController"  plugin="jboss-as-7"/>
            <parent-resource-type name="Host"  plugin="jboss-as-7"/>
            <parent-resource-type name="JBossAS7-Standalone"  plugin="jboss-as-7"/>
        </runs-inside>

        <plugin-configuration>
            <c:simple-property name="path" readOnly="true" default="interface"/>
        </plugin-configuration>
    </service>

    <service name="SocketBindingGroup"
             discovery="SubsystemDiscovery"
             class="BaseComponent"
            >
        <runs-inside>
            <parent-resource-type name="HostController"  plugin="jboss-as-7"/>
            <parent-resource-type name="JBossAS7-Standalone"  plugin="jboss-as-7"/>
        </runs-inside>


        <plugin-configuration>
            <c:simple-property name="path" readOnly="true" default="socket-binding-group"/>
        </plugin-configuration>

        <resource-configuration>
            <c:simple-property name="default-interface" readOnly="true" displayName="Default Interface" description="Default Interface for these bindings. See NetworkInterfaces for its definition" required="false"/>
            <!-- note: at domain level there is no port-offset -->
            <c:simple-property name="port-offset" readOnly="true" displayName="Port Offset" description="Offset from standard ports for this group" required="false"/>
            <c:list-property name="include">
                <c:simple-property name="binding" displayName="Included bindings" description="Other bindings that are included in this one"/>
            </c:list-property>
            <c:list-property name="socket-binding">
                <c:map-property name="binding">
                    <c:simple-property name="name" description="The name of the socket. Services which need to access the socket configuration information will find it using this name."/>
                    <c:simple-property name="interface" description="Name of the interface to which the socket should be bound, or, for multicast sockets, the interface on which it should listen. This should be one of the declared interfaces." required="false"/>
                    <c:simple-property name="port" description="Number of the port to which the socket should be bound." type="integer"/>
                    <c:simple-property name="fixed-port" description="Whether the port value should remain fixed even if numeric offsets are applied to the other sockets in the socket group." type="boolean"/>
                    <c:simple-property name="multicast-address" description="Multicast address on which the socket should receive multicast traffic. If unspecified, the socket will not be configured to receive multicast." />
                    <c:simple-property name="multicast-port" description="Port on which the socket should receive multicast traffic. Must be configured if 'multicast-address' is configured." type="integer"/>
                </c:map-property>
            </c:list-property>
        </resource-configuration>

    </service>

</plugin>
